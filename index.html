<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Typing Hub</title>
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#2c3e50">
    <link rel="apple-touch-icon" href="assets/image/icon-192.png">
    <style>
        :root {
            --header-bg: #333;
            --header-text: #fff;
            --blue-bar: #4a86e8;
            --highlight-yellow: #ffff00;
            --highlight-green: #008000;
            --highlight-red: #ff0000;
            --bg-gray: #f5f5f5;
            --border-color: #ccc;
        }

        * {
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', sans-serif;
            background-color: var(--bg-gray);
            margin: 0;
            padding: 0;
            height: 100vh;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        /* Top Header */
        header {
            background-color: var(--header-bg);
            color: var(--header-text);
            padding: 0 20px;
            height: 50px;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .header-title {
            font-weight: bold;
            font-size: 16px;
        }

        .tabs {
            display: flex;
            height: 100%;
        }

        .tab-btn {
            background: none;
            border: none;
            color: #aaa;
            padding: 0 20px;
            cursor: pointer;
            font-weight: bold;
            height: 100%;
            border-bottom: 3px solid transparent;
        }

        .tab-btn.active {
            color: #fff;
            border-bottom: 3px solid var(--blue-bar);
            background: rgba(255, 255, 255, 0.1);
        }

        /* Main Content Grid */
        .main-container {
            display: flex;
            flex: 1;
            overflow: hidden;
            width: 100%;
            max-width: 100%;
        }

        /* Left Side (Typing Area) */
        .left-pane {
            flex: 3;
            display: flex;
            flex-direction: column;
            border-right: 1px solid #ccc;
            background: white;
            min-width: 0;
            /* Fix flex overflow */
        }

        .info-bar {
            background-color: #e0e0e0;
            padding: 5px 10px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 1px solid #ccc;
            font-size: 14px;
        }

        .blue-header {
            background-color: #4387cc;
            color: white;
            padding: 8px 15px;
            font-weight: bold;
            font-size: 14px;
        }

        .typing-area {
            flex: 1;
            display: flex;
            flex-direction: column;
            padding: 10px;
            gap: 10px;
            overflow-y: auto;
        }

        .text-box {
            border: 1px solid black;
            padding: 15px;
            font-family: 'Times New Roman', Times, serif;
            font-size: 18px;
            line-height: 1.6;
            overflow-y: auto;
            flex: 1;
            white-space: pre-wrap;
        }

        .input-box {
            border: 2px solid #4387cc;
            padding: 15px;
            font-family: 'Times New Roman', Times, serif;
            font-size: 18px;
            line-height: 1.6;
            flex: 1;
            resize: none;
        }

        /* Exam Mode Highlights */
        span.word-pending {
            color: black;
        }

        span.word-current {
            background-color: var(--highlight-yellow);
        }

        span.word-correct {
            color: var(--highlight-green);
        }

        span.word-wrong {
            color: var(--highlight-red);
        }

        /* Practice Mode Highlights */
        span.char-correct {
            color: green;
            background-color: #e6ffFA;
        }

        span.char-wrong {
            color: red;
            background-color: #ffe6e6;
        }

        span.char-current {
            text-decoration: underline;
            background-color: #eee;
        }

        /* Right Side (Sidebar) */
        .right-pane {
            flex: 1;
            background-color: #f9f9f9;
            padding: 15px;
            display: flex;
            flex-direction: column;
            gap: 20px;
            min-width: 250px;
            overflow-y: auto;
            border-left: 2px solid #ccc;
        }

        .profile-section {
            display: flex;
            gap: 10px;
            align-items: center;
            background: #fff;
            padding: 10px;
            border: 1px solid #ddd;
        }

        .profile-img {
            width: 50px;
            height: 50px;
            background: #ccc;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            color: #fff;
        }

        .stats-table {
            width: 100%;
            border-collapse: collapse;
            background: #fff;
            border: 1px solid #ddd;
        }

        .stats-table td {
            padding: 8px;
            border-bottom: 1px solid #eee;
            font-size: 13px;
        }

        .stats-table td:first-child {
            font-weight: bold;
            color: #555;
        }

        .instructions {
            background: #fff;
            padding: 10px;
            border: 1px solid #ddd;
            font-size: 12px;
            color: #444;
        }

        .instructions h4 {
            margin-top: 0;
            margin-bottom: 5px;
        }

        /* Footer */
        footer {
            background-color: #e0f0f5;
            padding: 10px 20px;
            border-top: 1px solid #ccc;
            display: flex;
            justify-content: flex-end;
        }

        .btn-submit {
            background-color: #0275d8;
            color: white;
            border: none;
            padding: 8px 25px;
            font-weight: bold;
            cursor: pointer;
            border-radius: 4px;
        }

        .btn-submit:hover {
            opacity: 0.9;
        }

        /* Modal */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            align-items: center;
            justify-content: center;
            z-index: 1000;
        }

        .modal-content {
            background: white;
            padding: 30px;
            border-radius: 8px;
            width: 500px;
        }
    </style>
</head>

<body>

    <header>
        <div class="header-title">Typing Hub</div>
        <div class="tabs">
            <button class="tab-btn active" onclick="switchMode('exam')" id="btn-exam">Exam Mode</button>
            <button class="tab-btn" onclick="switchMode('practice')" id="btn-practice">Practice Mode</button>
        </div>
        <div style="display:flex; align-items:center; gap: 15px;">
            <button id="btn-start-test" onclick="startTest()"
                style="background: #5cb85c; color: white; border: none; padding: 5px 15px; border-radius: 3px; cursor: pointer; font-weight: bold;">Start
                Test</button>
            <button id="btn-reset-test" onclick="manualReset()"
                style="background: #d9534f; color: white; border: none; padding: 5px 15px; border-radius: 3px; cursor: pointer; font-weight: bold;"
                disabled>Reset Passage</button>
            <div style="font-size: 14px;">Time Left: <span id="timer">10:00</span></div>
        </div>
    </header>

    <div class="main-container">
        <!-- Left Pane -->
        <div class="left-pane">
            <div class="info-bar">
                <div>
                    <span
                        style="background: #0275d8; color: white; padding: 3px 8px; font-size: 12px; border-radius: 3px;">Section
                        A</span>
                </div>
                <div>Server Time: <span id="server-time">--:--</span></div>
            </div>

            <div class="blue-header">Keyboard Layout: QWERTY</div>

            <div class="typing-area">
                <div class="text-box" id="quoteDisplay"></div>
                <!-- Added disabled attribute initially -->
                <textarea class="input-box" id="quoteInput" placeholder="Click 'Start Test' to begin..."
                    spellcheck="false" disabled></textarea>
            </div>
        </div>

        <!-- Right Pane -->
        <div class="right-pane">
            <div class="profile-section">
                <div class="profile-img">ðŸ‘¤</div>
                <div><strong>Candidate Name</strong><br>User</div>
            </div>

            <table class="stats-table">
                <tr>
                    <td>Keystrokes Count</td>
                    <td id="stat-keystrokes">0</td>
                </tr>
                <tr>
                    <td>Backspace Count</td>
                    <td id="stat-backspace">0</td>
                </tr>
                <tr>
                    <td>Total Word Count</td>
                    <td id="stat-total-words">0</td>
                </tr>
                <tr>
                    <td>Typed Word Count</td>
                    <td id="stat-typed-words">0</td>
                </tr>
                <tr>
                    <td>Pending Word Count</td>
                    <td id="stat-pending-words">0</td>
                </tr>
                <tr>
                    <td>Error Count</td>
                    <td id="stat-errors" class="sensitive-stat">0</td>
                </tr>
                <tr>
                    <td>Gross WPM</td>
                    <td id="stat-gwpm" class="sensitive-stat">0</td>
                </tr>
                <tr>
                    <td>Net WPM</td>
                    <td id="stat-nwpm" class="sensitive-stat">0</td>
                </tr>
                <tr>
                    <td>Accuracy</td>
                    <td id="stat-accuracy" class="sensitive-stat">0%</td>
                </tr>
            </table>

            <div class="instructions">
                <h4>Instructions</h4>
                <ul style="padding-left: 20px; margin: 0;">
                    <li id="instr-1">Highlighting will guide you to current word.</li>
                    <li>Green/Red indicates Correct/Wrong words.</li>
                    <li>Avoid using backspace to maximize score.</li>
                    <li>Submit manually or auto-submit on timeout.</li>
                </ul>
            </div>
        </div>
    </div>

    <footer>
        <button class="btn-submit" onclick="finishTest()">Submit</button>
    </footer>

    <!-- Result Modal -->
    <div id="resultModal" class="modal">
        <div class="modal-content">
            <h2 style="margin-top:0;">Test Summary</h2>
            <div id="resultBody"></div>
            <div style="margin-top: 20px; text-align: right;">
                <button class="btn-submit" style="background:#d9534f;" onclick="resetTest()">Close & Reset</button>
            </div>
        </div>
    </div>

    <script>

        // State Elements
        const quoteDisplay = document.getElementById('quoteDisplay');
        const quoteInput = document.getElementById('quoteInput');
        const btnStart = document.getElementById('btn-start-test');
        const btnReset = document.getElementById('btn-reset-test');

        // Stats Elements
        const elKeystrokes = document.getElementById('stat-keystrokes');
        const elBackspace = document.getElementById('stat-backspace');
        const elTotalWords = document.getElementById('stat-total-words');
        const elTypedWords = document.getElementById('stat-typed-words');
        const elPendingWords = document.getElementById('stat-pending-words');
        const elErrors = document.getElementById('stat-errors');
        const elGwpm = document.getElementById('stat-gwpm');
        const elNwpm = document.getElementById('stat-nwpm');
        const elAccuracy = document.getElementById('stat-accuracy');
        const elTimer = document.getElementById('timer');
        const modal = document.getElementById('resultModal');

        let mode = 'exam'; // 'exam' or 'practice'
        let timerInterval;
        let timeLimit = 10 * 60; // 10 mins
        let timeLeft = timeLimit;
        let isRunning = false;

        // Passages Data (Embedded for local compatibility)
        let passages = [
            "India's G20 Presidency marked a historic milestone in the country's diplomatic journey, showcasing its emergence as a global leader capable of bridging the divide between the Global North and the Global South. The theme 'Vasudhaiva Kutumbakam' or 'One Earth, One Family, One Future' resonated deeply with the international community, emphasizing the interconnectedness of all life forms and the need for collaborative action to address global challenges. During its presidency, India prioritized issues such as inclusive growth, digital public infrastructure, climate financing, and women-led development. The New Delhi Leaders' Declaration was a significant achievement, demonstrating India's ability to forge consensus on contentious geopolitical issues. The inclusion of the African Union as a permanent member of the G20 was a testament to India's commitment to inclusivity and representation for developing nations. The presidency also highlighted India's rich cultural heritage and diversity through meetings held across various cities, boosting tourism and local economies. Furthermore, the focus on digital transformation showcased India's prowess in technology and its potential to provide scalable solutions for the world. As the baton passed to Brazil, India's legacy remained one of unity, determination, and a vision for a sustainable and equitable future for all humanity.",
            "The Digital India initiative, launched in 2015, has transformed the nation into a digitally empowered society and knowledge economy. By ensuring high-speed internet connectivity to rural areas, promoting digital literacy, and developing secure digital infrastructure, the program has bridged the digital divide and brought government services to the fingertips of citizens. A cornerstone of this revolution is the Unified Payments Interface (UPI), which has gained global recognition for its efficiency and scale, revolutionizing how Indians transact daily. Direct Benefit Transfers (DBT) enabled by the JAM trinity (Jan Dhan, Aadhaar, Mobile) have ensured that welfare subsidies reach the intended beneficiaries directly, curbing leakages and corruption. The proliferation of smartphones and affordable data has further fueled the growth of e-commerce, ed-tech, and health-tech sectors, creating new avenues for employment and entrepreneurship. Initiatives like DigiLocker have simplified document verification, while the ONDC (Open Network for Digital Commerce) aims to democratize digital commerce. However, challenges such as cybersecurity threats and the need for robust data protection laws remain. As India moves towards a trillion-dollar digital economy, the focus must remain on inclusivity, ensuring that the benefits of technology reach the last mile and empower every citizen.",
            "Chandrayaan-3's successful soft landing on the moon's south pole was a momentous occasion that etched India's name in the history of space exploration. This achievement made India the fourth country to land on the moon and the first to reach the uncharted lunar south pole region. The mission demonstrated ISRO's resilience and engineering prowess, bouncing back from the partial failure of its predecessor. The Vikram lander and Pragyan rover conducted in-situ scientific experiments, studying the lunar surface's thermal properties, seismic activity, and elemental composition. The discovery of sulphur and other elements provided crucial insights into the moon's geological history. Beyond the scientific gains, Chandrayaan-3 ignited a passion for science and technology among India's youth and bolstered the country's reputation as a cost-effective and reliable space power. The mission's success has opened doors for deeper international collaboration and future interplanetary expeditions. It also underscored the potential of India's private space sector, which is witnessing rapid growth. As India aims for the stars with upcoming missions like Gaganyaan, the spirit of Chandrayaan-3 serves as a beacon of inspiration, proving that with determination and innovation, even the sky is not the limit.",
            "India's startup ecosystem has witnessed exponential growth over the past decade, evolving into the third-largest in the world. Driven by a young and aspirational population, affordable internet, and a supportive policy environment, Indian startups are solving complex problems across diverse sectors. From fintech and e-commerce to health-tech and agritech, entrepreneurs are leveraging technology to create value and drive social impact. The rise of unicornsâ€”startups valued at over a billion dollarsâ€”has been rapid, signaling the maturity and investor confidence in the Indian market. Government initiatives like 'Startup India' have played a catalytic role by providing tax benefits, simplifying regulations, and setting up fund-of-funds. Innovation hubs and incubators in academic institutions are nurturing the next generation of founders. However, the ecosystem faces challenges such as funding winters, regulatory hurdles, and the need for sustainable business models. Deep-tech and manufacturing startups, in particular, require patient capital and long-term support. As the ecosystem matures, the focus is shifting from valuation to value creation, corporate governance, and profitability. With a vast domestic market and global ambitions, Indian startups are poised to play a pivotal role in the country's journey towards becoming a developed nation by 2047.",
            "Infrastructure development has been a central pillar of India's growth strategy, with the government aggressively pushing for modernization to enhance connectivity and economic efficiency. The PM Gati Shakti National Master Plan is a transformative approach to coordinate infrastructure planning and execution across various ministries. The rapid expansion of the highway network, the dedicated freight corridors, and the modernization of railways with Vande Bharat trains are revolutionizing logistics and travel. The aviation sector is also witnessing a boom with the construction of new airports under the UDAN scheme, making air travel accessible to smaller cities. Urban infrastructure is being upgraded through the Smart Cities Mission and the expansion of metro rail networks in major cities. Additionally, the focus on renewable energy infrastructure, such as solar parks and green hydrogen hubs, aligns with India's climate goals. These developments are not only creating jobs but also attracting foreign investment by reducing the cost of doing business. However, ensuring the sustainability and maintenance of these assets is crucial. As India builds for the future, the emphasis must be on resilient, eco-friendly, and inclusive infrastructure that caters to the needs of a growing population and a dynamic economy.",
            "The Green Hydrogen Mission is a pivotal step towards India's energy transition and goal of becoming energy independent by 2047. It aims to make India a global hub for the production, usage, and export of green hydrogen and its derivatives. By incentivizing the domestic manufacturing of electrolyzers and the production of green hydrogen, the mission seeks to decarbonize hard-to-abate sectors such as refining, fertilizer, and shipping. This initiative will not only reduce dependence on imported fossil fuels but also create substantial employment opportunities in the renewable energy sector. The government has allocated significant funds to support R&D and pilot projects, recognizing the potential of green hydrogen as a clean fuel of the future. Collaborations with international partners and private sector investments are crucial for scaling up production and reducing costs. As the world moves towards a net-zero future, India's leadership in green hydrogen could position it as a key player in the global clean energy landscape.",
            "The launch of the Aditya-L1 mission marked a new chapter in India's space exploration journey, turning its gaze towards the Sun. As India's first dedicated solar observatory, Aditya-L1 is designed to study the Sun's upper atmosphere, including the chromosphere and corona, as well as solar winds and magnetic storms. Placed at the Lagrange Point 1 (L1), about 1.5 million kilometers from Earth, the spacecraft enjoys an uninterrupted view of the Sun. The data gathered from its seven payloads will provide crucial insights into coronal heating, coronal mass ejections, and space weather dynamics, which have a direct impact on satellite operations and communication networks on Earth. This mission complements the achievements of Chandrayaan-3 giving ISRO a unique capability to study both the Moon and the Sun. The scientific community worldwide is eagerly awaiting the findings, which could unravel long-standing mysteries about our nearest star.",
            "The Ayushman Bharat Digital Mission (ABDM) is revolutionizing India's healthcare ecosystem by creating a seamless digital highway. It aims to bridge the gap between patients and healthcare providers by establishing a robust digital health infrastructure. Central to this mission is the creation of Ayushman Bharat Health Accounts (ABHA), which provide every citizen with a unique health ID. This allows for the secure and consensual sharing of health records, enabling doctors to access a patient's medical history instantly, regardless of location. The Unified Health Interface (UHI) is another key component, interoperability between different digital health applications. ABDM also includes registries for healthcare professionals and facilities, ensuring transparency and accountability. By leveraging technology, the mission seeks to improve the efficiency, accessibility, and quality of healthcare delivery, particularly in remote and underserved areas. As adoption grows, ABDM promises to transform the patient experience and enable data-driven policymaking for a healthier India.",
            "The PM Vishwakarma Scheme represents a significant effort to support and empower traditional artisans and craftspeople across India. Recognizing their vital role in preserving India's cultural heritage and local economy, the scheme offers a holistic package of support. It includes financial assistance, skill upgradation, toolkit incentives, and marketing support for artisans engaged in 18 traditional trades such as carpentry, blacksmithing, pottery, and weaving. By providing collateral-free loans at concessional interest rates, the government aims to help these artisans modernize their tools and scale up their businesses. The scheme also emphasizes digital empowerment and brand building, enabling Vishwakarmas to access wider markets. This initiative aligns with the vision of 'Vocal for Local' and aims to integrate these skilled workers into the formal economy and global value chains. It is a tribute to the dignity of labor and the invaluable contribution of millions of hands that build and beautify the nation.",
            "The Nari Shakti Vandan Adhiniyam, or the Women's Reservation Bill, is a landmark legislation that seeks to reserve one-third of seats for women in the Lok Sabha and State Legislative Assemblies. This historic move is aimed at increasing women's political representation and participation in decision-making processes. By ensuring a critical mass of women in legislative bodies, the act is expected to bring a fresh perspective to governance and policy issues, particularly those affecting women and children. It is seen as a major step towards gender equality and women-led development. While the implementation is linked to the delimitation exercise, the passage of the bill demonstrates a strong political will to empower women. Increased representation is likely to inspire more women to enter public life and break the glass ceiling in politics. The act acknowledges that true democracy is incomplete without the equal participation of half the population.",
            "India's Semiconductor Mission is a strategic initiative to position the country as a global hub for electronics manufacturing and design. Recognizing the critical importance of semiconductors in modern technology, from smartphones to electric vehicles and defense systems, the government has rolled out a comprehensive incentive package to attract global chipmakers. The mission focuses on establishing semiconductor wafer fabrication facilities, display fabs, and packaging units in India. It also emphasizes the development of a strong talent pool in VLSI design and semiconductor engineering. By reducing reliance on imports and building a domestic supply chain, India aims to enhance its digital sovereignty and economic resilience. Several major global players have already announced investments, signaling confidence in India's potential. As the demand for chips continues to soar globally, India's entry into this high-tech sector is timely and promises to be a game-changer for its manufacturing landscape.",
            "The reintroduction of cheetahs in India is an ambitious conservation project aimed at restoring the country's lost natural heritage. Decades after the Asiatic cheetah was declared extinct in India, African cheetahs were translocated from Namibia and South Africa to the Kuno National Park in Madhya Pradesh. This project is the world's first intercontinental large wild carnivore translocation. It aims to establish a viable cheetah metapopulation in India, which will help restore open forest and grassland ecosystems. The presence of a flagship predator like the cheetah is expected to improve the management of these habitats and benefit other species as well. While the project faces challenges such as acclimatization and conflict with other predators, initial milestones like the birth of cubs offer hope. It also generates eco-tourism opportunities for local communities. The success of this project could serve as a model for global wildlife conservation efforts.",
            "The Gaganyaan mission is India's maiden human spaceflight program, aiming to demonstrate the capability to send humans to low earth orbit and bring them back safely. Led by ISRO, the mission involves launching a crew of three members to an orbit of 400 km for a 3-day mission. Key technologies developed for this mission include a human-rated launch vehicle (LVM3), a crew module with life support systems, and a crew escape system for emergency aborts. Extensive training for the astronauts, or 'Gaganauts', is being conducted in collaboration with international agencies. The mission also involves the development of a humanoid robot, Vyommitra, for unmanned test flights. Gaganyaan is not just about sending humans to space; it is about building a sustained human presence in space and opening up new frontiers in science and technology. It reflects India's growing confidence and ambition in the space sector.",
            "The Bharat 6G Alliance is a collaborative platform involving industry, academia, and government to drive innovation and leadership in next-generation wireless technology. While 5G rollout is still underway, India is already looking ahead to 6G, aiming to be a key contributor to global standards and intellectual property. The alliance seeks to identify research priorities, facilitate international partnerships, and support startups working on 6G technologies. The vision is to develop a ubiquitous, intelligent, and secure connectivity ecosystem that can support futuristic applications like holographic communication and immersive digital twins. By actively participating in the definition and development of 6G, India ensures that its specific needs and requirements are addressed. This proactive approach marks a shift from being a technology consumer to a technology creator. It aligns with the goal of securing a leadership position in the global digital economy of the next decade.",
            "The inauguration of the new Parliament building symbolizes a renewed spirit of Indian democracy and its aspirations for the future. Built as part of the Central Vista Redevelopment Project, the triangular structure is designed to accommodate a larger number of vertically integrated legislative chambers, reflecting the needs of a growing nation. It features state-of-the-art facilities, energy-efficient systems, and incorporates elements of India's diverse cultural heritage. The 'Sengol', a historic scepter symbolizing the transfer of power, has been installed in the Lok Sabha chamber, connecting the past with the present. The building is not just a seat of power but a testament to the country's architectural and engineering capabilities (Atmanirbhar Bharat). It provides a modern and functional space for lawmakers to debate and shape the destiny of the nation. As India marches towards its centenary of independence, the new Parliament stands as an icon of a self-reliant and confident India.",
            "The 'One Nation, One Election' proposal advocates for holding simultaneous elections for the Lok Sabha and State Legislative Assemblies. The core idea is to streamline the electoral process, reduce the staggering costs associated with frequent elections, and minimize the disruption to governance caused by the repeated imposition of the Model Code of Conduct. Proponents argue that a synchronized election cycle would allow governments to focus on development and policy implementation for a full five-year term without being in constant campaign mode. It could also improve voter turnout and reduce the burden on security forces and administrative machinery. However, implementing this would require significant constitutional amendments and consensus among political parties. Concerns about the impact on federalism and regional issues need to be addressed. A high-level committee has been studying the feasibility and legal framework required for this major electoral reform.",
            "The Agnipath Scheme is a transformative reform in the recruitment policy of the Indian Armed Forces. It aims to lower the average age profile of the military and create a more youthful and tech-savvy fighting force. Under this scheme, youth known as 'Agniveers' are recruited for a period of four years. While 25% of them are retained for regular service based on merit, the rest are demobilized with a handsome financial package called the 'Seva Nidhi'. This exit package is designed to help them start a second career or pursue higher education. The scheme allows the military to recruit from a wider talent pool and reduce the burgeoning pension bill. For the youth, it offers an opportunity to serve the nation, gain discipline and skills, and secure a financial head start. The integration of Agniveers is expected to bring fresh energy and modernization to the defense forces.",
            "The expansion of PM Gati Shakti involves integrating more data layers and ministries to further enhance the coordination of infrastructure projects. Originally focused on physical infrastructure, the scope is broadening to include social sector assets like schools and hospitals. The initiative leverages a GIS-based platform to provide comprehensive visibility of projects, preventing silos and overlapping efforts. By bringing together departments like railways, roads, power, and telecom, it ensures multimodal connectivity and last-mile efficiency. The focus is now also on area development approaches to create economic nodes and industrial clusters. This holistic planning tool is proving critical in reducing time and cost overruns in major projects. As it scales, Gati Shakti is becoming a model for good governance and efficient public administration, ensuring that every rupee spent on infrastructure delivers maximum value to the economy.",
            "The Unified Logistics Interface Platform (ULIP) is a digital gateway that integrates data from various ministries and logistics stakeholders to bring efficiency and transparency to the sector. By providing a single window for tracking and documentation, ULIP aims to reduce logistics costs and improve India's ranking in the Logistics Performance Index. It enables real-time information exchange between shippers, carriers, and government agencies, reducing delays and paperwork. The platform supports the development of new applications by private players, fostering innovation in logistics services. It complements the Gati Shakti master plan by providing the soft infrastructure for seamless movement of goods. For a large and diverse economy like India, ULIP is a game-changer in building a resilient and competitive supply chain network.",
            "The declaration of 2023 as the International Year of Millets, spearheaded by India, has brought global attention to these nutrient-rich, climate-resilient crops. India, the largest producer of millets, is promoting them as 'Shree Anna' to ensure food security and nutritional well-being. Millets require less water and can grow in arid conditions, making them ideal for a changing climate. The initiative aims to increase production, efficient processing, and consumption of millets globally. Prioritizing millets in the public distribution system and mid-day meal schemes attempts to address malnutrition. The global push has opened new export markets for Indian farmers and created opportunities for startups in the food processing sector. This movement is not just about agriculture; it is about reclaiming traditional sustainable food systems and promoting a healthy lifestyle.",
            "The launch of the Digital Rupee (eâ‚¹) by the Reserve Bank of India marks a significant stride in the evolution of currency. As a Central Bank Digital Currency (CBDC), it is a legal tender issued in digital form, equivalent to physical cash. The Digital Rupee aims to bolster the digital economy, reduce the cost of physical currency management, and promote financial inclusion. It offers features like trust, safety, and settlement finality, similar to cash. The pilot projects in both wholesale and retail segments have tested its efficiency in real-time interbank settlements and person-to-person assignments. Unlike cryptocurrencies, the Digital Rupee is sovereign-backed and stable. It has the potential to make cross-border payments cheaper and faster. As usage scales, it could reshape the payments landscape, offering a secure and efficient alternative to traditional banking channels.",
            "Production Linked Incentive (PLI) Schemes have been a cornerstone of the 'Make in India' and 'Atmanirbhar Bharat' campaigns. Covering key sectors like electronics, pharmaceuticals, automobiles, and textiles, these schemes offer financial incentives to companies based on their incremental sales from products manufactured in domestic units. The goal is to boost India's manufacturing capabilities, reduce import dependence, and create global champions. The success in the smartphone sector, with major global brands setting up manufacturing bases in India, highlights the scheme's potential. It has also spurred investments in emerging sectors like batteries and green energy. By linking incentives to output, the government ensures performance and scalability. These schemes are critical for absorbing the country's growing workforce and integrating India into global supply chains.",
            "Swachh Bharat Mission 2.0 focuses on sustaining the open defecation-free status and managing solid and liquid waste in urban areas. The vision is to make all cities 'Garbage Free'. It emphasizes source segregation of waste, reduction in single-use plastics, and remediation of legacy dumpsites. The mission also aims to ensure complete fecal sludge management and wastewater treatment. By promoting the principles of Circular Economy, it encourages waste-to-wealth initiatives. Behavioral change communication continues to be a key component, engaging citizens in keeping their surroundings clean. The operational guidelines prioritize scientific processing of waste over land-filling. This phase is crucial for environmental sustainability and public health in India's rapidly urbanizing landscape.",
            "The vision of 'Amrit Kaal', extending from India's 75th year of independence to its centenary in 2047, outlines a roadmap for a developed and prosperous nation. It envisions a technology-driven and knowledge-based economy with strong public finances and a robust financial sector. The focus is on inclusive welfare, ensuring that the fruits of development reach all sections of society. It emphasizes a shift towards renewable energy and sustainable living. The vision also entails reducing compliance burdens and promoting ease of living. Empowering the youth (Amrit Peedhi) through skill development and education is a central theme. It is a clarion call for collective effort, 'Sabka Prayas', to transform India into a global superpower, fulfilling the aspirations of its billion-plus citizens."
        ];

        // Data Tracking
        let originalText = "";
        let originalWords = [];
        let backspaceCount = 0;
        let startTime = null;

        // Server Time Clock
        function updateServerTime() {
            const now = new Date();
            const timeString = now.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });
            document.getElementById('server-time').innerText = timeString;
        }
        setInterval(updateServerTime, 1000);
        updateServerTime();

        function switchMode(newMode) {
            mode = newMode;
            document.getElementById('btn-exam').classList.toggle('active', mode === 'exam');
            document.getElementById('btn-practice').classList.toggle('active', mode === 'practice');

            // Text for instructions
            const instrContainer = document.querySelector('.instructions ul');
            if (mode === 'exam') {
                instrContainer.innerHTML = `
                    <li>Kindly type the highlighted word to proceed further.</li>
                    <li>Kindly note, you can edit the text contents that you have typed.</li>
                    <li>Correct/Wrong words turn Green/Red respectively.</li>
                    <li>Kindly note, it is mandatory for you to type the entire text contents to submit.</li>
                    <li>Upon timeout, the system will automatically save all your responses.</li>
                    <li><strong>Note: Performance stats are hidden until submission.</strong></li>
                `;
            } else {
                instrContainer.innerHTML = `
                    <li>Practice Mode: Immediate character-level feedback.</li>
                    <li>Green background indicates correct characters.</li>
                    <li>Red background indicates incorrect characters.</li>
                    <li>Real-time accuracy and WPM tracking.</li>
                `;
            }

            resetTest();
        }

        function init() {
            // Pick random passage
            originalText = passages[Math.floor(Math.random() * passages.length)];
            // Normalize spaces
            originalText = originalText.replace(/\s+/g, ' ').trim();
            originalWords = originalText.split(' ');

            renderText();
            quoteInput.value = '';

            // Disable input until Start is clicked
            quoteInput.disabled = true;
            quoteInput.placeholder = "Click 'Start Test' to begin...";

            btnStart.style.display = 'block'; // Show Start Button
            // btnReset state: Enabled when NOT running (Idle)
            // User requested: "disabled during the test"
            btnReset.disabled = false;

            // Stats Reset
            backspaceCount = 0;
            timeLeft = timeLimit;
            elTimer.innerText = "10:00";

            updateStatsUI(0, 0, 0, 0, 0, 0, 0, 0);
        }

        function startTest() {
            if (isRunning) return;
            isRunning = true;
            quoteInput.disabled = false;
            quoteInput.value = "";
            quoteInput.focus();
            quoteInput.placeholder = "Type here...";

            btnStart.style.display = 'none'; // Hide Start Button
            btnReset.disabled = true; // Disable Reset during test

            startTime = new Date();
            timerInterval = setInterval(() => {
                if (timeLeft > 0) {
                    timeLeft--;
                    const m = Math.floor(timeLeft / 60).toString().padStart(2, '0');
                    const s = (timeLeft % 60).toString().padStart(2, '0');
                    elTimer.innerText = `${m}:${s}`;
                    executeStatsLogic(); // Update time-dependent stats
                } else {
                    finishTest();
                }
            }, 1000);
        }

        function renderText() {
            quoteDisplay.innerHTML = '';

            if (mode === 'exam') {
                // Word-based rendering
                originalWords.forEach((word, index) => {
                    const span = document.createElement('span');
                    span.innerText = word + " "; // Add space visual
                    span.id = `word-${index}`;
                    span.className = 'word-pending';
                    quoteDisplay.appendChild(span);
                });
                // Highlight first word
                if (originalWords.length > 0) {
                    document.getElementById('word-0').className = 'word-current';
                }
            } else {
                // Character-based rendering (Practice Mode)
                originalText.split('').forEach((char, index) => {
                    const span = document.createElement('span');
                    span.innerText = char;
                    span.id = `char-${index}`;
                    quoteDisplay.appendChild(span);
                });
            }

            elTotalWords.innerText = originalWords.length;
            elPendingWords.innerText = originalWords.length;
        }

        quoteInput.addEventListener('keydown', (e) => {
            if (!isRunning) return; // Should be disabled anyway
            if (e.key === 'Backspace') {
                backspaceCount++;
                elBackspace.innerText = backspaceCount;
            }
        });

        quoteInput.addEventListener('input', () => {
            if (!isRunning) return;

            if (mode === 'exam') {
                handleExamInput();
            } else {
                handlePracticeInput();
            }
            executeStatsLogic();
        });

        // --- EXAM MODE LOGIC (Word Based) ---
        // --- EXAM MODE LOGIC (Word Based Limit, Char Based Validation) ---
        function handleExamInput() {
            const currentInput = quoteInput.value;
            const currentLength = currentInput.length;

            // Re-calculate word start/end indices on the fly (or could cache in init)
            // We assume originalText is single-spaced as normalized in init()
            let charIndex = 0;

            originalWords.forEach((word, idx) => {
                const el = document.getElementById(`word-${idx}`);
                if (!el) return;

                const start = charIndex;
                const end = charIndex + word.length; // Exclusive end of word content
                // Next char is space (except last word)
                charIndex = end + 1;

                // Reset styles
                el.className = '';
                el.style.backgroundColor = '';
                el.style.color = '';

                // Logic based on input cursor position relative to this word
                if (currentLength > end) {
                    // Cursor is past this word (including the space after it)
                    // Or at least past the word. Check if space was typed? 
                    // Strict mode: Check if the segment in currentInput matches exactly

                    const userSegment = currentInput.substring(start, end);
                    if (userSegment === word) {
                        el.className = 'word-correct';
                    } else {
                        el.className = 'word-wrong';
                    }
                } else if (currentLength >= start) {
                    // Cursor is INSIDE this word
                    el.className = 'word-current';

                    // Check if what's typed SO FAR for this word is correct
                    const userSegment = currentInput.substring(start, currentLength);
                    const targetSegment = word.substring(0, userSegment.length);

                    if (userSegment !== targetSegment) {
                        // Error in current typing
                        el.style.backgroundColor = 'var(--highlight-yellow)';
                        el.style.color = 'red';
                    } else {
                        // Correct so far
                        el.style.backgroundColor = 'var(--highlight-yellow)';
                        el.style.color = 'black';
                    }
                } else {
                    // Cursor not reached yet
                    el.className = 'word-pending';
                }
            });
        }

        // --- PRACTICE MODE LOGIC (Char Based) ---
        function handlePracticeInput() {
            const val = quoteInput.value;
            const arr = val.split('');
            const spans = quoteDisplay.querySelectorAll('span');

            spans.forEach((span, i) => {
                const char = arr[i];
                if (char == null) {
                    span.className = ''; // Reset
                    if (i === arr.length) span.className = 'char-current';
                } else if (char === span.innerText) {
                    span.className = 'char-correct';
                } else {
                    span.className = 'char-wrong';
                }
            });
        }

        // --- SCORING & STATS ---
        function executeStatsLogic() {
            const text = quoteInput.value;
            const keystrokes = text.length;

            const typedWordsList = text.trim().split(/\s+/);
            const typedWordsCount = text.trim() === '' ? 0 : typedWordsList.length;

            let errorCount = 0;

            if (mode === 'exam') {
                const inputList = text.split(/\s+/);
                inputList.forEach((w, i) => {
                    if (i < inputList.length - 1) {
                        if (originalWords[i] && w !== originalWords[i]) {
                            errorCount += w.length;
                        }
                    }
                });
            } else {
                for (let i = 0; i < text.length; i++) {
                    if (i < originalText.length && text[i] !== originalText[i]) {
                        errorCount++;
                    }
                }
            }

            const timeElapsedMin = (timeLimit - timeLeft) / 60;
            const validTime = timeElapsedMin === 0 ? 0.001 : timeElapsedMin;

            const gwpm = Math.round((keystrokes / 5) / validTime);

            const grossWords = keystrokes / 5;
            const penalty = errorCount / 5;
            const netWords = Math.max(0, grossWords - penalty);
            const nwpm = Math.round(netWords / validTime);

            const acc = gwpm > 0 ? Math.round((nwpm * 100) / gwpm) : 100;

            const pending = Math.max(0, originalWords.length - typedWordsCount);

            updateStatsUI(keystrokes, backspaceCount, originalWords.length, typedWordsCount, pending, errorCount, gwpm, nwpm, acc);
        }

        function updateStatsUI(k, b, tot, typ, pen, err, g, n, a) {
            // Always update basic counters
            elKeystrokes.innerText = k;
            elBackspace.innerText = b;
            elTotalWords.innerText = tot;
            elTypedWords.innerText = typ;
            elPendingWords.innerText = pen;

            // Conditional update for performance stats
            if (mode === 'exam' && isRunning) {
                // HIDE live stats in Exam Mode
                elErrors.innerText = "--";
                elGwpm.innerText = "--";
                elNwpm.innerText = "--";
                elAccuracy.innerText = "--";
            } else {
                // SHOW live stats in Practice Mode OR if stopped (Result)
                elErrors.innerText = err;
                elGwpm.innerText = g;
                elNwpm.innerText = n;
                elAccuracy.innerText = a + "%";
            }
        }

        function finishTest() {
            clearInterval(timerInterval);
            isRunning = false;
            quoteInput.disabled = true;

            // Force final update to reveal stats in Exam Mode
            // Re-run stats logic with isRunning = false to populate UI
            executeStatsLogic();

            // Show Modal with Final Values
            const body = document.getElementById('resultBody');
            body.innerHTML = `
                <p><strong>Net WPM:</strong> <span style="font-size: 20px; color: blue;">${elNwpm.innerText}</span></p>
                <p><strong>Accuracy:</strong> ${elAccuracy.innerText}</p>
                <p><strong>Gross WPM:</strong> ${elGwpm.innerText}</p>
                <p><strong>Errors (Chars):</strong> ${elErrors.innerText}</p>
                <p><strong>Keystrokes:</strong> ${elKeystrokes.innerText}</p>
            `;
            modal.style.display = 'flex';
        }

        function resetTest() {
            modal.style.display = 'none';
            clearInterval(timerInterval);
            isRunning = false;
            init();
        }

        // Manual passage refresh (Button Click)
        function manualReset() {
            if (isRunning) return; // Should be disabled anyway
            resetTest();
        }

        // Start on load
        window.onload = init;

        // Disable paste
        quoteInput.onpaste = e => e.preventDefault();

    </script>
</body>

</html>